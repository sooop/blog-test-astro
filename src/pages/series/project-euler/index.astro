---
import { getCollection } from 'astro:content';
import BaseLayout from '../../../layouts/BaseLayout.astro';

const projectEulerPosts = await getCollection('project-euler');

// Sort posts by number
const sortedPosts = projectEulerPosts.sort((a, b) => {
	const numA = parseInt(a.id.replace('.md', ''));
	const numB = parseInt(b.id.replace('.md', ''));
	return numA - numB;
});
---

<BaseLayout title="Project Euler - Wireframe" currentPath="/series/project-euler">
				<!-- Hero Section -->
				<section class="max-w-5xl mx-auto px-6 py-16 md:py-24">
					<div class="max-w-3xl">
						<p
							class="text-xs text-muted-foreground mb-6 tracking-widest uppercase"
						>
							Mathematics
						</p>
						<h1
							class="font-serif text-4xl md:text-5xl lg:text-6xl leading-tight text-balance mb-8 text-foreground"
						>
							Project Euler
						</h1>
						<p
							class="text-lg md:text-xl text-muted-foreground leading-relaxed text-pretty max-w-2xl"
						>
							수학과 프로그래밍이 만나는 지점. 각 문제는 단순히 답을 구하는
							것이 아니라, 아름다운 해법을 찾아가는 여정입니다.
						</p>
					</div>
				</section>

				<!-- Problems List -->
				<section class="max-w-5xl mx-auto px-6 pb-24">
					<h2
						class="text-xs text-muted-foreground mb-12 tracking-widest uppercase"
					>
						Problems
					</h2>

					<div class="space-y-12">
						{
							sortedPosts.map((post) => {
								const number = post.id.replace('.md', '');
								return (
									<article class="border-t border-border pt-8">
										<div class="flex items-start justify-between gap-4">
											<div class="flex-1">
												<div class="flex items-center gap-3 mb-3">
													<span class="text-xs text-muted-foreground tracking-wider font-mono">
														#{number.padStart(3, '0')}
													</span>
													{post.data.published_date && (
														<span class="text-xs text-muted-foreground">
															{new Date(
																post.data.published_date
															).getFullYear()}
														</span>
													)}
												</div>
												<h3 class="font-serif text-xl md:text-2xl mb-2 text-foreground">
													{post.data.title}
												</h3>
												{post.data.custom_excerpt && (
													<p class="text-muted-foreground leading-relaxed text-sm">
														{post.data.custom_excerpt}
													</p>
												)}
											</div>
											<a
												href={`/series/project-euler/${number}`}
												class="text-sm text-accent hover:opacity-70 transition-opacity whitespace-nowrap font-medium"
											>
												Read →
											</a>
										</div>
									</article>
								);
							})
						}
					</div>
	</section>
</BaseLayout>
